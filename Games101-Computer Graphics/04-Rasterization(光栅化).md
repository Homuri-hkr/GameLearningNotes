- 在图形学中，屏幕就是一个二维数组，数组里的每一个元素就对应着一个像素

- 屏幕是一个典型的光栅成像设备，把东西画在一个屏幕的过程就是光栅化

- 屏幕空间，约定将屏幕的左下角作为坐标系原点，向右是x轴，向上是y轴，假设每一个像素都是一个个颜色均匀的小方块

- 小知识，很多实际像素中绿色的元素要多余红色和蓝色，因为人眼对绿色更敏感

- 视口变换，将-1到1的正方体映射到屏幕空间。即将其缩放至屏幕大小再将原点移至屏幕中心
  $$
  M_{viewport}=\begin{bmatrix}w/2&0&0&w/2 \\ 0&h/2&0&h/2
  \\0&0&1&0 \\ 0&0&0&1\end{bmatrix}
  $$

- LCD(液晶显示器)通过不同的排布影响光的偏振方向

  LED(发光二极管)

**光栅化**

- 三角形的优秀性质：

  最基础的多边形，没有比三角形边还少的，任何其他的多边形都能拆成三角形

  给定三个点一定是连成一个平面

  三角形的内外非常明确，不会出现类似凹凸三角形的概念，可以用叉乘计算一个点在三角形内还是外

  根据三角形内的点可以完成三角形内的渐变和插值

- 光栅化的一个要点是判断像素和图的三角形的位置关系，更详细说是考虑中心点和像素的位置关系

- 简单的方式是通过对像素中心进行采样(离散化的过程)的方式，即判断像素中心是否在三角形内(叉乘)，若一个点在三角形边上，自行选择是否算数

- 用一个矩形将要进行光栅化的三角形围起来(称为包围盒)，再对其中的点判断是否进行光栅化

- 锯齿，因为像素本身具有一定的大小

- 图形学中对一切错误和不想看到的结果称作Artifact

- 采样导致的问题：锯齿、摩尔纹(去掉奇数列的像素点，但图片还是原来大小)、车轮效应(顺时针旋转但看上去像是逆时针)等

- 离散傅里叶变换(DFT)：将一个有限长序列离散化成有限长序列，也可以将一个函数从时域变换到频域
  $$
  f(x)=a_0+\sum_{n=1}^{\infty}({a_ncos\frac{n\pi x}{L}+b_nsin\frac{n\pi x}{L}})
  $$
  快速傅里叶变换(FFT)：把原始的N点序列依次分解成一系列的短序列，利用DFT计算式中指数因子所具有的对称性质和周期性质，进而求出这些短序列相应的DFT并进行适当组合，达到删除重复计算，减少乘法运算和简化结构的目的

- 信号变化非常大，就是高频信息，在图像中即是一个边界，边界两边色彩相差比较大，相差越小频率越低

- 滤波在图形学中和卷积和平均相似。高通滤波：只允许高频率通过。低通滤波：只允许低频率通过

- 图形学中的简化卷积定义：将过滤器中的数和信号做一个点乘，将信号改为点乘的结果

- 时域上对两个信号进行卷积，对应到频域上是两个信号的乘积。在时域上是两个信号的乘积，则在频域上是两个信号的卷积

- 采样：在时域上相当于一个连续的函数乘一个只在固定周期有值的函数，得到的是连续函数固定周期的离散点。在频域上，固定周期有值的函数的周期会改变，但还是只在固定周期有值，而连续函数变成了一小段，得到的结果是按周期重复的小段函数

- 走样：信号变换太快导致采样跟不上变换速度，对于同样一个采样方法采取两种不同频率的函数所得的结果无法分辨

  频域中，采样不够快，即周期有值的周期比较短，会造成小段函数会有重复的地方，产生混合

- 反走样：通过滤波(低通滤波器)来解决，即过滤掉在频域上重叠的频率即可，视觉上是对图片进行模糊。

- 一些抗锯齿技术：

  MSAA通过在一个像素中通过多个采样点来判断是否在三角形内部的比例从而进行卷积，并没有通过增加分辨率(即增加像素点解决)

  FXAA(Fast Approximate AA)先将有锯齿的图得出来再通过图像匹配将锯齿找到，将边界换成没有锯齿的边界

  TAA(Temporal AA)通过上一帧的图来对当前图判断是否在三角形内，相当于时间轴上的MSAA

- 超分辨率，将小图拉大会出现采样率不够分辨率的情况，这个技术就是将图片变成高分辨率

- 可见性，物体渲染到屏幕上有一个顺序问题，近的会将远处的重合部分遮挡

  画家算法O(n)：将最远的问题先画到屏幕上再画近的物体，让近的物体将远处的物体覆盖完成遮挡。如果深度关系无法确定则该算法有问题

  Z-buffering(深度缓存)O(n)：最开始深度缓存中记录的距离是无限远，找到每个像素(或者采样点)覆盖的三角形，判断每一个相机的深度是否小于我深度缓存中记录好的深度，若小于，则将深度缓存中的值更新至小的值并且把新的三角形画在屏幕上。为了完成深度缓存，图形学中会存储最终的结果图，还会生成另一个图像，只保存任何一个像素能看到的最浅的深度信息，这个图就是深度缓存，深度缓存的图中，离相机越近颜色越深，越远颜色越浅。对于透明物体Z-buffering无法处理，需要特殊处理