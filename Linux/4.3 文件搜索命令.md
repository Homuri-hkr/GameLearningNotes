### 4.3 **文件搜索命令**

ps：尽量减少搜索操作，其资源消耗很大，尽量在建立文件的时候就规划好结构避免搜索

| 命令名称 | find                       |
| -------- | -------------------------- |
| 功能     | 文件搜索，挨个遍历         |
| 所在路径 | /bin/find                  |
| 执行权限 | 所有用户                   |
| 语法     | find [搜索范围] [匹配条件] |

1. -name：根据文件名搜索（完全匹配搜索）， * 通配符代表任何长度的任意字符，？通配符表示匹配一个长度的任意字符                                                                                                                           eg：查找etc目录下的文件名为 init 的文件 find /etc -name init
2. -iname：在-name的基础上加上搜索时不区分大小写
3. -size：根据文件大小查找。+ 表示大于 -表示小于 没写表示等于。size 按数据块来计算，1个数据块= 0.5K                                                                                                                                                eg：查找大于100MB的文件 find / -size +204800
4. -user/-group：根据所有者/所属组查找                                                                                                                    eg：查找所有者为 zy 的文件   find / -user zy
5. -amin(access)/-cmin(change)/-mmin(modify)：                                                                                 根据访问时间 / 文件属性更改时间 / 文件内容更改时间 查找，+ 表示超过多少时间，- 表示在多少时间之内                                                                                                                                                                       eg：查找30分钟内 etc 目录下被更改文件内容的文件 find /etc -mmin -30
6. -a(and)/-o(or)：两个条件同时满足/满足任意一个即可                                                                                 eg：查找所有者为 zy 的大于100MB 的文件 find /etc -user zy -a -size +204800
7. -type：根据文件类型查找，f 代表文件，d 代表目录， l 代表软链接文件
8. -inum：根据 i 节点查找。可以用来找硬链接和删除莫名其妙的文件等等
9. -exec/-ok 命令 {} \;  ：对查找的文件进行操作，-exec 不需要确认直接执行，-ok 对每一个文件进行的操作进行确认，{} 表示对搜索结果的整合（像一个表示搜索到的文件的变量），\ 转义字符，; 结束符                                                                                                                                                       eg：查找文件名为 init 的文件并删除 find / -name init -exec rm {} \;

| 命令名称 | locate                                                       |
| -------- | ------------------------------------------------------------ |
| 功能     | 在文件资料库中查找文件，其查询速度很快。文件资料库会定期收录文件，未被收录的文件无法查询，且文件资料库不会收录/tmp目录下的文件 |
| 所在路径 | /usr/bin/locate                                              |
| 执行权限 | 所有用户                                                     |
| 语法     | locate [文件名]                                              |

-i：不区分文件名大小写                                                                                                                                       eg：在文件资料库中查找 init 文件 locate -i init

ps：updatedb命令：手动更新文件资料库，root权限才能使用

| 命令名称 | which                          |
| -------- | ------------------------------ |
| 功能     | 搜索命令所在绝对路径及别名信息 |
| 所在路径 | /usr/bin/which                 |
| 执行权限 | 所有用户                       |
| 语法     | which [命令]                   |
| eg       | which rm                       |

ps：现在Linux给 rm -i 取了一个别名为rm，当使用 rm 时实际使用的 rm -i ，实际的 rm 的命令是不需要确认的，所有要确认的都取了个 -i 的别名

| 命令名称 | whereis                              |
| -------- | ------------------------------------ |
| 功能     | 搜索命令所在绝对路径及其帮助文档路径 |
| 所在路径 | /usr/bin/whereis                     |
| 执行权限 | 所有用户                             |
| 语法     | whereis [命令]                       |
| eg       | whereis rm                           |

| 命令名称 | grep                             |
| -------- | -------------------------------- |
| 功能     | 在文件中搜寻字符串匹配的行并输出 |
| 所在路径 | /usr/bin/whereis                 |
| 执行权限 | 所有用户                         |
| 语法     | grep [指定字符串] [文件]         |

1. -i：不区分大小写                                                                                                                                                         eg：查找不区分大小写的名为multiuser字符串所在行 grep -i multiuser /etc/inittab
2. -v：排除该指定的字符串（或反向查找？）                                                                                                                                         eg：查找不包括multiuser字符串所在行 grep -i multiuser /etc/inittab
3. -n：输出行号
4. --color=auto 搜索出的关键字用颜色表示

ps：Linux配置文件中以 # 开始的表示注释，^ 表示行首