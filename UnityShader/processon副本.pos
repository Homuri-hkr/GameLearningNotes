{"diagram":{"image":{"height":200,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","width":200,"y":0,"x":0},"elements":{"id":"root","structure":"mind_right","leftChildren":[{"id":"741eb8aa0775","title":"光照模型","lineStyle":{"randomLineColor":"#FCB52A"},"parent":"root","children":[{"id":"f69eec111c3e","title":"Lambert模型：漫反射光与法向量和入射光角度成正比","parent":"741eb8aa0775","children":[]},{"id":"3ae0f6e34541","title":"half Lambert模型：将{-1,1}的法线和入射角余弦映射到[0,1]","children":[],"parent":"741eb8aa0775"},{"id":"a88347755996","title":"Phong模型：自发光+漫反射+高光","children":[],"parent":"741eb8aa0775"},{"id":"67d2231df1c0","title":"Blinn-Phong：引入半程向量，计算更简单，效果更真实","children":[],"parent":"741eb8aa0775"}]},{"id":"3a84abfab32e","title":"透明效果","lineStyle":{"randomLineColor":"#FA5465"},"children":[{"id":"aa0ae9991eef","title":"渲染顺序：先渲染非透明，再按深度值排序渲染透明物体","children":[],"parent":"3a84abfab32e"},{"id":"5a75a82056fe","title":"若单个半透明物体交互重叠，通常使用分割网格处理","children":[],"parent":"3a84abfab32e"},{"id":"78ccab8bfd32","title":"透明度测试：不满足透明度的直接干掉，不适合半透明物体","parent":"3a84abfab32e","children":[]},{"id":"0af6e31ff558","title":"透明度混合：关闭深度写入，若开启则需要使用两个Pass，第一个只写入深度值，第二个根据前一个渲染物体。若想渲染双面，则需要使用两个Pass分别剔除正面和背面渲染一次","parent":"3a84abfab32e","children":[]}],"parent":"root"},{"id":"51d58492799c","title":"高级纹理","lineStyle":{"randomLineColor":"#FA5465"},"children":[{"id":"70441bfaafde","title":"立方体纹理","children":[{"id":"f39c50cd2d34","title":"天空盒：最后渲染到屏幕最深的位置","children":[],"parent":"70441bfaafde"},{"id":"4ec0a6e52429","title":"反射：通过入射光线方向和表面法线方向计算反射方向然后采样","children":[],"parent":"70441bfaafde"},{"id":"ae5d15664fde","title":"折射：使用斯涅尔定律（k1sin\\theta1 = k2sin\\theta2）计算折射方向，通常计算一次，两次比较复杂","children":[],"parent":"70441bfaafde"},{"id":"e4afaca7233c","title":"菲涅尔反射：被反射光和入射光之间的比例关系。Schlick近似等式：F(v,n)=F0 + (1-F0)(1-v*n)","children":[],"parent":"70441bfaafde"}],"parent":"51d58492799c"},{"id":"4f5de5366186","title":"渲染纹理","children":[{"id":"87df253f653b","title":"镜子效果：在镜子处放一个摄像机，然后从该摄像机渲染出一个图片放在镜子上","children":[],"parent":"4f5de5366186"},{"id":"405f2bfb7d51","title":"玻璃效果：抓取屏幕，然后对该纹理进行一定偏移用于模拟折射，结合立方体纹理的反射模拟","children":[],"parent":"4f5de5366186"}],"parent":"51d58492799c"},{"id":"27424eebe6a9","title":"程序性纹理：在脚本中写纹理","children":[],"parent":"51d58492799c"}],"parent":"root"},{"id":"7060b07d6e82","title":"屏幕后处理","lineStyle":{"randomLineColor":"#7549C5"},"children":[{"id":"823f6bf56895","title":"unity处理流程","children":[{"id":"34385795e9a2","title":"1.检查该屏幕后处理效果所需的条件是否满足","children":[],"parent":"823f6bf56895"},{"id":"ebea2def9be5","title":"2.在摄像中添加用于屏幕后处理的脚本","children":[],"parent":"823f6bf56895"},{"id":"8d558c1ca76f","title":"3.在脚本中实现OnRenderImage函数获取当前屏幕的渲染纹理","children":[],"parent":"823f6bf56895"},{"id":"85fbbf26ebba","title":"4.调用Graphics.Blit使用特定的shader对当前图像进行处理，然后把返回的渲染纹理显示到屏幕上","children":[],"parent":"823f6bf56895"}],"parent":"7060b07d6e82"},{"id":"95d8ca961b14","title":"调整亮度、饱和度、对比度","children":[{"id":"a27d55440946","title":"亮度：颜色乘以亮度系数","children":[],"parent":"95d8ca961b14"},{"id":"bb8e2cdef6e5","title":"饱和度：对颜色各个分量乘以特定系数相加求得亮度值，然后作为rgb三个分量创建饱和度为0的颜色然后根据对饱和度系数进行插值","children":[],"parent":"95d8ca961b14"},{"id":"978956ff4275","title":"对比度：rgb分量都为0.5，然后和颜色值根据对比度系数进行插值","children":[],"parent":"95d8ca961b14"}],"parent":"7060b07d6e82"},{"id":"b4c7a6fd7f86","title":"边缘检测","children":[{"id":"45194aceb498","title":"使用边缘检测算子，以及颜色进行边缘检测，周围几个像素合起来颜色值差距高于一个度就为边缘","children":[],"parent":"b4c7a6fd7f86"}],"parent":"7060b07d6e82"},{"id":"97572371cd25","title":"高斯模糊","children":[{"id":"d0d5bb38052a","title":"使用高斯核，并使用多次迭代加深高斯模糊，且使用缩放和双线性滤波对图像进行降采样","children":[],"parent":"97572371cd25"},{"id":"adb2de10f9f2","title":"高斯会通过横向和纵向各计算一遍，降低计算复杂度","children":[],"parent":"97572371cd25"}],"parent":"7060b07d6e82"},{"id":"95bc33f65895","title":"Bloom效果","children":[{"id":"0524e36441ed","title":"通过一个阈值，将画面中较亮的区域提取出来，然后进行高斯模糊，最后和原图像进行混合，完成朦胧的效果","children":[],"parent":"95bc33f65895"}],"parent":"7060b07d6e82"},{"id":"b7abe18ca029","title":"运动模糊","children":[{"id":"e2f04d474549","title":"利用一块缓存混合多张连续的图像，当物体快速移动的时候就会模糊，该方法对性能消耗比较大","children":[],"parent":"b7abe18ca029"},{"id":"39cee6cf6413","title":"创建速度缓存，存储了各个元素的速度，然后利用该值来聚鼎模糊的方向和大小","children":[],"parent":"b7abe18ca029"}],"parent":"7060b07d6e82"}],"parent":"root"},{"id":"6931cfffab57","title":"不真实渲染","lineStyle":{"randomLineColor":"#DD489D"},"children":[{"id":"e81299412dff","title":"卡通风格渲染","children":[{"id":"19b68c5b3d90","title":"轮廓线","children":[{"id":"450d8502ba37","title":"基于观察角度和表面法线的轮廓线渲染，使用视角方向和表面发现的点乘获得轮廓线。简单快速，但效果差","children":[],"parent":"19b68c5b3d90"},{"id":"a22073f5df5e","title":"过程式几何渲染：第一个Pass渲染背面的面片，然后让其轮廓可见（如沿着光线向外扩张），然后再正常渲染正面面片。快速且适用于大多数表面平滑的模型，不适合立方体这样平整的模型","children":[],"parent":"19b68c5b3d90"},{"id":"df7a6a0234e7","title":"基于图像处理的轮廓线渲染，即法线和深度，对于如深度和法线变化很小的轮廓无法被检测出来","children":[],"parent":"19b68c5b3d90"},{"id":"45578b71e409","title":"基于轮廓边检测的轮廓线渲染：检查一个边是否为轮廓边，检查相邻面片是否朝向同一个方向可以渲染出具有风格的轮廓线，缺点是实现复杂，具有动作连贯性问题，逐帧提取轮廓可能出现跳跃性","children":[],"parent":"19b68c5b3d90"},{"id":"518787110faf","title":"混合：先找到轮廓边，将模型和轮廓边渲染到纹理中，再使用图像处理方法识别出轮廓线并在图像空间进行风格化渲染","children":[],"parent":"19b68c5b3d90"}],"parent":"e81299412dff"},{"id":"077a202984ea","title":"高光","children":[{"id":"0c122067b920","title":"法线和半程向量点乘，和阈值进行比较，若小于该值则高光反射为0，否则为1，该粗暴的判断会在边界造成锯齿，可以在很小的区间进行平滑处理","children":[],"parent":"077a202984ea"}],"parent":"e81299412dff"}],"parent":"6931cfffab57"},{"id":"4e26328431cd","title":"素描风格","children":[{"id":"881f3a0cefa4","title":"使用不同的纹理，其中笔触的间隔不同，从上到下对应了每张纹理的多级渐远纹理","children":[],"parent":"4e26328431cd"}],"parent":"6931cfffab57"}],"parent":"root"},{"id":"f1183d5f8b1a","title":"基于物理渲染","lineStyle":{"randomLineColor":"#FCB52A"},"children":[{"id":"015be41bfb0e","title":"BRDF：给定入射角度后给出所有出射方向上的反射和散射光线的相对分布情况。给定出射方向后给出所有入射方向到出射方向的光线分布","children":[{"id":"1f05d76a52c1","title":"漫反射项：最广泛为Lambert。有很多复杂的公式","children":[],"parent":"015be41bfb0e"},{"id":"cfe77067c78c","title":"高光反射项","children":[{"id":"afb88cf6346d","title":"菲涅尔反射函数，反射光线占入射光的比例","children":[],"parent":"cfe77067c78c"},{"id":"f750278779a8","title":"法线分布函数，多少比例的微面元法线等于半程向量，这部分可能反射到视野中","children":[],"parent":"cfe77067c78c"},{"id":"15c0098d2e37","title":"阴影遮掩函数，多少被遮挡不会被人眼看到","children":[],"parent":"cfe77067c78c"}],"parent":"015be41bfb0e"}],"parent":"f1183d5f8b1a"}],"parent":"root"}],"title":"Unity Shader","watermark":"","root":true,"theme":"delicate_caihong","children":[{"id":"0c4c59a4b9f994c0","title":"渲染管线","lineStyle":{"randomLineColor":"#3D5EC2"},"parent":"root","children":[{"id":"64364613cfa8","title":"应用阶段","children":[{"id":"0689ed3cabff","title":"将数据载入到显存","parent":"64364613cfa8","children":[]},{"id":"17567dce13bf","title":"设置渲染状态","parent":"64364613cfa8","children":[]},{"id":"23ad8fad94d9","title":"调用DrawCall","parent":"64364613cfa8","children":[]}],"parent":"0c4c59a4b9f994c0"},{"id":"35d28f722e0f","title":"几何阶段","children":[{"id":"dbcdaef3d443","title":"顶点着色器","parent":"35d28f722e0f","children":[]},{"id":"aba1e8f060ff","title":"曲面细分着色器","parent":"35d28f722e0f","children":[]},{"id":"8059156985de","title":"几何着色器","parent":"35d28f722e0f","children":[]},{"id":"ff6836b9b8df","title":"裁剪","parent":"35d28f722e0f","children":[]},{"id":"5979f23a3f4e","title":"屏幕映射","parent":"35d28f722e0f","children":[]}],"parent":"0c4c59a4b9f994c0"},{"id":"b34160ec2e80","title":"光栅化阶段","children":[{"id":"068629e5b3c7","title":"三角形设置","parent":"b34160ec2e80","children":[]},{"id":"fdf6323556f6","title":"三角形遍历","parent":"b34160ec2e80","children":[]},{"id":"ce63c9fdf1f6","title":"片元着色器","parent":"b34160ec2e80","children":[]},{"id":"e89119ab593f","title":"逐片元操作","parent":"b34160ec2e80","children":[]}],"parent":"0c4c59a4b9f994c0"}]},{"id":"a17dedd94202","title":"纹理","lineStyle":{"randomLineColor":"#7549C5"},"parent":"root","children":[{"id":"5e23bacd2cb8","title":"凹凸映射","parent":"a17dedd94202","children":[{"id":"2cde3e547336","title":"高度贴图","parent":"5e23bacd2cb8","children":[{"id":"67aa5e2199e7","title":"利用额外的G-buffer，存储所有离摄像机最近的表面的其他信息，如法线、位置、材质属性等，其效率和使用的屏幕空间大小有关","children":[],"parent":"2cde3e547336"}]},{"id":"8fc8a9ed5e27","title":"法线纹理","children":[{"id":"08d34fc8c725","title":"基于模型空间：实现简单且直观，在边缘位置更合理","children":[],"parent":"8fc8a9ed5e27"},{"id":"abe415819e29","title":"基于切线空间：实现复杂，在边缘位置可能出现突变。但自由度高，可重用，可以进行UV动画，可以压缩","children":[],"parent":"8fc8a9ed5e27"}],"parent":"5e23bacd2cb8"}]},{"id":"ed533ec67f00","title":"渐变纹理：一种一维纹理，主要应用在对漫反射附加颜色，使光照下不同角度呈现不同效果","children":[],"parent":"a17dedd94202"},{"id":"6ccea6ca8cb0","title":"遮罩纹理：用于保护某种属性不受改变（用该纹理的值乘以改变的值）","children":[],"parent":"a17dedd94202"}]},{"id":"9b5236abfcdb","title":"高级光照","lineStyle":{"randomLineColor":"#F88A35"},"children":[{"id":"75bcf2b3e8e8","title":"前向渲染路径","children":[{"id":"cb0cce9e16e6","title":"Base Pass：计算一个逐像素的平行光以及所有逐顶点和SH光源，对于一个物体只进行一次计算","children":[],"parent":"75bcf2b3e8e8"},{"id":"4b364e168c9e","title":"Additional Pass：计算其他影响该物体的逐像素光源，每个光源执行一次Pass，默认不支持阴影","children":[],"parent":"75bcf2b3e8e8"}],"parent":"9b5236abfcdb"},{"id":"09718126ee77","title":"延迟渲染路径","children":[{"id":"4ccf497ac1a9","title":"第一个Pass：不进行任何光照计算，只计算哪些片元可见，并将相关信息存入G-buffer","children":[],"parent":"09718126ee77"},{"id":"02ba857a921d","title":"第二个Pass：利用G-buffer中的信息进行真正的光照计算","children":[],"parent":"09718126ee77"},{"id":"706a2534d1ee","title":"缺点：不支持真正的抗锯齿功能。不能处理半透明物体。对显卡有一定的要求","children":[],"parent":"09718126ee77"}],"parent":"9b5236abfcdb"},{"id":"68f254f48fe4","title":"计算光照衰减","children":[{"id":"bd1252e611c9","title":"使用纹理进行计算：精度有限制，不直观，但使用简便","children":[],"parent":"68f254f48fe4"},{"id":"75706e7e1a0e","title":"使用数学公式进行计算：自由，但光照计算可能会复杂","children":[],"parent":"68f254f48fe4"}],"parent":"9b5236abfcdb"},{"id":"520b6a171965","title":"阴影","children":[{"id":"3eb8852d4a95","title":"Shadow Map：将摄像机放到光源位置，渲染一遍更新深度信息。传统映射将顶点位置变换到光源空间下进行映射。屏幕空间的阴影映射技术使用阴影纹理和摄像机的深度纹理，若摄像机的纹理图大于对应阴影纹理中位置的深度，则该物体看得见且处于阴影","children":[],"parent":"520b6a171965"}],"parent":"9b5236abfcdb"}],"parent":"root"},{"id":"31fb08247381","title":"动画","lineStyle":{"randomLineColor":"#3D5EC2"},"children":[{"id":"56907916eb3f","title":"纹理动画","children":[{"id":"d6501ebd3297","title":"序列帧动画：播放一系列关键帧的动画，当速度达到一定时看上去就像动画。美术工程量比较大","children":[],"parent":"56907916eb3f"},{"id":"dc24a045e234","title":"滚动的背景：使用不同层级的背景模拟人物在场景中穿梭，使用时间在水平线上偏移","children":[],"parent":"56907916eb3f"}],"parent":"31fb08247381"},{"id":"e917fc980f84","title":"顶点动画","children":[{"id":"3cf654173003","title":"流动的河流：使用正弦函数等模拟水流波动效果","children":[],"parent":"e917fc980f84"},{"id":"b99d05da1c14","title":"广告牌：构建三个相互正交的基向量（目标的法线和指向上的方向，但两者通常不是正交的，但其中之一是固定的，通过两个叉乘求出另一个轴然后归一化求出不固定的那个轴），设定一个锚点保证旋转过程中是不变的，以确定在空间中的位置","children":[],"parent":"e917fc980f84"},{"id":"e58487b11ffd","title":"注意：若在模型空间下进行顶点动画，批处理往往会破坏该动画结果，要么关闭批处理，要么不在模型空间进行计算。顶点动画若需要使用阴影必须在物体中进行计算","children":[],"parent":"e917fc980f84"}],"parent":"31fb08247381"}],"parent":"root"},{"id":"94d19bf7d028","title":"使用深度和法线纹理","lineStyle":{"randomLineColor":"#0D7C82"},"children":[{"id":"f3bea64ac0e0","title":"运动模糊","children":[{"id":"e0f9333bb17e","title":"使用深度纹理和视角*投影矩阵获得世界空间的顶点坐标，然后使用前一帧的视角*投影矩阵得到前一帧的世界顶点坐标，计算两者差获得速度，通过速度对周围像素取值进行模糊。缺点是在片元着色器进行了两次矩阵运算影响性能","children":[],"parent":"f3bea64ac0e0"}],"parent":"94d19bf7d028"},{"id":"732ebe767ee3","title":"全局雾效","children":[{"id":"fab3f25a0fd6","title":"根据深度纹理重建每个像素在世界空间的位置，通过摄像机射线取得像素在世界空间到摄像机的方向信息，与线性化的视角空间下的深度值相乘加上摄像机坐标就获得世界坐标，然后使用各个公式模拟全局雾效。主要是混合雾的颜色和当前颜色","children":[],"parent":"732ebe767ee3"}],"parent":"94d19bf7d028"},{"id":"8f3401a42e3b","title":"边缘检测","children":[{"id":"0ec2f22bd028","title":"采样周围的深度和法线，当打到一个阈值认为是边缘","children":[],"parent":"8f3401a42e3b"}],"parent":"94d19bf7d028"}],"parent":"root"},{"id":"0b94ac7c1614","title":"噪声","lineStyle":{"randomLineColor":"#80BA4C"},"children":[{"id":"b284f2791b31","title":"消融效果","children":[{"id":"38a62894c24d","title":"对噪声纹理采样结果和控制消融程度的阈值比较，若小于则裁减掉该像素对应消融部分，边缘烧焦的效果就是将火焰颜色和当前颜色混合然后使用pow函数处理，阈值进行变化即可播放消融动画","children":[],"parent":"b284f2791b31"}],"parent":"0b94ac7c1614"},{"id":"fa3f91312ed0","title":"水波效果","children":[{"id":"2c4e53dd253e","title":"使用噪声生成法线纹理。可以使用uv+speed和uv-speed模拟两层交叉水面波动","children":[],"parent":"fa3f91312ed0"}],"parent":"0b94ac7c1614"},{"id":"17922d6b342f","title":"全局雾效","children":[],"parent":"0b94ac7c1614"}],"parent":"root"}],"note":""}},"meta":{"id":"60ddbddef346fb04d2d3f584","member":"5ecd2453f346fb69071b5eaa","exportTime":"2021-07-02 21:14:04","diagramInfo":{"category":"mind_free","title":"图形学","created":"2021-07-01 21:06:38","creator":"5ecd2453f346fb69071b5eaa","modified":"2021-07-02 21:01:26"},"type":"ProcessOn Schema File","version":"1.0"}}