### 7.1 主存管理

- 物理地址：计算机主存单元的真实地址，又称绝对地址或实地址。处理机依据绝对地址可以随机存取存放在其内的信息
- 逻辑地址：提供一个虚拟地址空间，每个应用程序相信它的主存是由0单元开始的一组连续地址组成。对于每个逻辑地址，在主存中没有一个固定的物理单元与之对应，因此根据逻辑地址不能直接在主存中存取信息。
- 地址映射：程序执行时，将逻辑地址正确转换为物理地址
- 虚拟存储器的技术：计算机在处理应用程序时，只装入部分程序代码和数据就启动其运行，由操作系统和硬件相配合完成主存和辅存之间的信息的动态调度，好像为用户提供了一个存储容量比实际主存大得多的存储器
- 地址映射方式：
  - 编程或编译时确定地址映射关系：虚实地址间的对应惯性在程序编写时确定，结果为一个不能浮动的程序模块，经过编译后也得到一个不能浮动的程序模块，其必须被放在主存中的一个确定位置
  - 静态地址映射：虚实地址间的对应关系在程序装入主存时实现的，那么编译和连接的结果就是一个可浮动的程序模块
  - 动态地址映射：程序执行过程中每次访问存储器时，都通过地址变换机构将虚地址变为物理地址，则虚实地址的对应关系是在程序执行过程中实现的

### 7.3 分区存储管理及存在的问题

- 分区策略：首次适应法，最佳适应法，最坏适应法。空闲区队列按相应的思想进行排序
- 分区存在严重的碎片问题，静态分区造成内碎片，动态分区造成外碎片，外碎片可以使用拼接方法进行改善

### 7.4 页式存储管理

- 避开程序对连续性的要求，让程序空间去适应存储器的空间。主存被分为一系列的块，程序的地址空间被等分成一系列的页面，将页面放到主存块中，为便于实现动态地址转换，主存的块与页面大小相等且为2的幂
- 在按区分配的方法中，程序的地址空间小于主存可用空间时，该程序是不能投入运行的，分页可以方便的支持虚拟存储
- 当程序按页划分装入存储器时，操作系统为该程序建立一个页表，其记录程序虚页与其在主存中块的对应关系的数据结构，即页号-块号。虚地址结构是页号，以及页内偏移，地址转换时，首先通过虚地址的页号找到对应的块号，然后和页内位移相加就能找到对应位置的指令
- 抖动：刚被淘汰出去的页，过后不久又要访问，此时有进行调入，调入不久又淘汰，如此往复，影响了整个系统的效率
- 置换算法：
  - 最佳算法：一个理论算法，当调入一个新页必须先淘汰之后不再用或者最长时间不用的
  - 先进先出淘汰算法：谁先进就先淘汰谁。存储分块表的结构：块号-页号-指针，使用一个替换指针指向最老的页面
  - 最久未使用淘汰算法：当需要置换一页时，选择最长时间未被使用的那页。使用堆栈，当一个页面被访问过，就立即将它的页号记在页号栈的顶部，若栈中原有的页号中有与新记入顶部的页号相重者就将该重号抽出。这需要连续的修改
  - LRU近似算法：当某块页面被访问时，由硬件置为1，而页面管理软件周期性的将所有因用那个位重新置0，这样在该周期内未被访问的为0，当需要置换时选择为0的置换

### 7.5 段氏和段页式存储管理

- 页式系统中虚页存放的内容一般都不是一个逻辑意义完整的信息单位，对于调用许多子程序的大型用户来说，仍然会感到主存空间的使用效率不高
- 段式系统中，程序由若干个逻辑分段组成，分段是程序中自然划分的一组逻辑意义完整的信息集合，是用户在编程时决定的。更灵活的段式系统允许用户使用大量的段，而且按照各自赋予的名字来访问这些段。
- 程序地址由段号-段内位移构成，段式地址变换由段表实现，应包括段号、段长、段首址，通过段号找到段首址然后加上段内位移就可以得到具体的指令
- 段式系统和页式系统的地址变换相似，但段式是二维地址结构，页式是一维的
- 段式和页式的区别：
  - 页式系统可实现存储空间的物理划分，段式实现的是程序地址空间的逻辑划分
  - 页面的大小固定且相等，段式系统中的分段长度可变且不相等由用户编程时决定
  - 页面是用户不可间的，分段是用户可见的
  - 将程序地址分成页号和页内位移是硬件功能，页内位移溢出将自动加到页号中去。程序地址分为段号和段内位移是逻辑功能，段内位移溢出将造成主存越界

